\documentclass[letterpaper,nofootinbib,prd,amsmath,onecolumn]{revtex4-1}

\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{float}
\usepackage{listings}
\usepackage{pdfpages}
\usepackage{courier}
\usepackage{color}
\usepackage{mathrsfs}

\begin{document}
\special{papersize=8.5in,11in}

\title{Invariant Gauge Conditions under Foliation Preserving Coordinate Transformation}
\author{J.~David Brown, Meng Cao}
\affiliation{Department of Physics, North Carolina State University, Raleigh, NC 27695 USA}

\begin{abstract}
The transform law of 3 + 1 splitting variables, such as the lapse, shift vector, extrinsic curvature and etc., under a foliation preserving coordinate transformation are presented. The covariant forms of time derivative of the lapse and time derivative of the shift vector are given. The invariant form of 1 + log slicing condition and Gamma-driver shift equation are derived from those covariant time derivatives. Utilize these invariant gauge conditions, it allows one to evolve the same system with two different coordinate systems and reach the same result. A time dependent spatial rotation coordinate transformation is discussed in details as a specific example of this case.  
\end{abstract}
\maketitle

\section{Introduction}
The Einstein's equations are in the covariant form under spacetime diffeomorphism, which means the equations are invariant under spacetime coordinate transformations. 3 + 1 splitting mechanism slices the spacetime into a family of spacelike hypersurfaces which is referred as foliations. On each foliation, a timelike parameter t is constant. By breaking the symmetry of time and space domain, the 3 + 1 formulation makes it possible to evolve a general relativity system along with time numerically. On the other hand, although it still preserves the invariant property, it is not manifest in the equations anymore. While constructing numerical simulations, either in ADM formulation or BSSN formulation, people use gauge conditions(such as 1 + log slicing and Gamma-driver shift condition) to evolve the lapse and shift vector along with time. Unfortunately, these gauge condition equations are neither explicitly nor implicitly covariant. This scheme works sufficiently accurate if the system is evolved in one single coordinate system. However, if the same system is evolved with two different coordinate systems to the same time under this kind of gauge conditions, it is not guaranteed that we can get the same results. 

This situation leads to our motivation of this paper. We will try to examine the transform pattern of physical quantities in 3 + 1 splitting system under a so called ``foliation preserving coordinate transformation'', which includes time reparamerization and time dependent spatial deffeomorphism while the structure of foliations is preserved. Then we will try to write down the covariant form of the gauge conditions under this coordinate transformation and give the guideline of how to implement this into numerical simulation. 

The paper is organized as follows. In Sec.~\ref{3+1}, we explain the notation and convention we are going to follow in this paper. Then we briefly review the 3 + 1 splitting formulation while introducing several significant terms which will be used in latter sections. In Sec.~\ref{transform}, we give the definition of foliation preserving coordinate transformation, under which we derive and list the transform pattern of all significant 3 + 1 splitting physical quantities. The ordinary gauge conditions, i.e.~1 + log slicing condition and Gamma-driver shift equations, are dicussed in details in Sec.~\ref{gauge}. They are then modified to covariant forms and a guideline of how to implement this covariant gauge condition is provided. Last but not least, in Sec.~\ref{example} we demonstrate how this scheme works in a specific coordinate transformation case, time dependent spatial rotation.
\section{3 + 1 Splitting}\label{3+1}
Throughout this paper, we use Greek letter indices $\mu$, $\nu$, ... to denote spacetime indices and Latin letters $a$, $b$, ... to denote spatial indices. $\nabla_{\mu}$ stands for the spacetime covariant derivative while $D_{a}$ is the spatial covariant derivative.

In 3 + 1 formulation, we have
\begin{equation*}
^{(4)}g_{\mu\nu} = \begin{pmatrix}-\alpha^2 + \beta^{c}\beta_{c} & \beta_{b}\\\\\beta_{a} & g_{ab}\end{pmatrix}
\end{equation*}
where $\alpha$ is called the lapse function, $\beta^{a}$ the shift vector and $g_{ab}$ the spatial metric. The covariant normal to each foliation is denoted as
\begin{equation}\label{normal covector}
n_{\mu} = -\alpha\delta^{0}_{\mu}
\end{equation}
 And its dual is
\begin{equation}\label{normal vector}
n^{\mu} = (\delta^{\mu}_{0} - \beta^{c}\delta^{\mu}_{c})/\alpha
\end{equation}
so that we have $n_{\mu}n^{\mu} = 1$. 

There is also the projection operator
\begin{equation}\label{projection 1}
X^{\mu}_{a} = \delta^{\mu}_{a}
\end{equation}
that projects a spacetime covector into a spacelike covector. Its covariant form is
\begin{equation}\label{projection 2}
X^{a}_{\mu} = \delta^{a}_{\mu} + \beta^{a}\delta^{0}_{\mu}
\end{equation}
so that we have $X^{\mu}_{a}X^{b}_{\mu} = \delta^{b}_{a}$ and $X^{\mu}_{a}n_{\mu} = 0$. 

With these definitions, the spacetime metric can be written in terms of the spatial metric, the normal and the projection operator as
\begin{equation}\label{spacetime metric 3 + 1}
^{(4)}g_{\mu\nu} = g_{ab}X^{a}_{\mu}X^{b}_{\nu} - n_{\mu}n_{\nu}
\end{equation}
Spacetime indices $\mu$, $\nu$, ... are always raised and lowered with the spacetime metric $^{(4)}g_{\mu\nu}$ and its inverse $^{(4)}g^{\mu\nu}$, while spatial indices $a$, $b$, ... are always raised and lowered with the spatial metric $g_{ab}$ and its inverse $g^{ab}$. 

Another important quantity in 3 + 1 splitting, the extrinsic curvature is defined as
\begin{equation}\label{extrinsic}
K_{ab} = - \frac{1}{2\alpha}\left[\partial_{t}g_{ab} - 2D_{(a}\beta_{b)}\right]
\end{equation}
\section{Foliation Preserving Coordinate Transformation}\label{transform}
{\bf {\color{red}PROPERTY OF THIS TRANSFORMATION.

WHY WE ARE FOCUS ON THIS TRANSFORMATION.}} 

This foliation preserving coordinate transformation is a time dependent spatial diffeomorphism combined with time reparameterization. We use $x^{\mu}$ to denote the original coordinate basis and $x^{\mu'}$ the transformed coordinate basis. Therefore, the transformation can be described as
\begin{align*}
t' & = t'(t)\\
x^{a'} & = x^{a'}(t,x^{a})
\end{align*}
and vice versa, we have
\begin{align*}
t & = t(t')\\
x^{a} & = x^{a}(t',x^{a'})
\end{align*}
Use the chain rule of partial differentiation to inspect the delta function for this tranformation, we have
\[
\delta^{a}_{b} = \frac{\partial x^{a}}{\partial x^{b}} = \frac{\partial x^{a}}{\partial x^{\mu'}}\frac{\partial x^{\mu'}}{\partial x^{b}} = \frac{\partial x^{a}}{\partial t'}\frac{\partial t'}{\partial x^{b}} + \frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{a'}}{\partial x^{b}}
\]
and since $t' = t'(t)$, $\partial t'/\partial x^{b} = 0$, hence we reached an important identity of this coordinate transformation
\begin{equation}
\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{a'}}{\partial x^{b}} = \delta^{a}_{b}
\end{equation}
and equivalently
\begin{equation}
\frac{\partial x^{a'}}{\partial x^{a}}\frac{\partial x^{a}}{\partial x^{b'}} = \delta^{a'}_{b'}
\end{equation}
The spacetime metric transforms regularly under this transformation
\begin{align}\label{spacetime metric}
^{(4)}g_{\mu'\nu'} &=~^{(4)}g_{\mu\nu}\frac{\partial x^{\mu}}{\partial x^{\mu'}}\frac{\partial x^{\nu}}{\partial x^{\nu'}}\notag\\
& = (g_{ab}X^{a}_{\mu}X^{b}_{\nu} - n_{\mu}n_{\nu})\frac{\partial x^{\mu}}{\partial x^{\mu'}}\frac{\partial x^{\nu}}{\partial x^{\nu'}}
\end{align}
By substituting the indices $\mu'$ and $\nu'$ for $a'$ and $b'$ respectively in Eq.~\ref{spacetime metric}, we can obtain the transformation law of the spatial metric
\begin{align}
g_{a'b'} & = (g_{ab}X^{a}_{\mu}X^{b}_{\nu} - n_{\mu}n_{\nu})\frac{\partial x^{\mu}}{\partial x^{a'}}\frac{\partial x^{\nu}}{\partial x^{b'}}\notag\\
&= g_{ab}(\frac{\partial x^{a}}{\partial x^{a'}} + \beta^{a}\frac{\partial t}{\partial x^{a'}})(\frac{\partial x^{b}}{\partial x^{b'}} + \beta^{b}\frac{\partial t}{\partial x^{b'}}) - \alpha^2\frac{\partial t}{\partial x^{a'}}\frac{\partial t}{\partial x^{b'}}\notag\\
& = g_{ab}\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}}
\end{align}
And its inverse should transform as
\begin{equation}
g^{a'b'} = g^{ab}\frac{\partial x^{a'}}{\partial x^{a}}\frac{\partial x^{b'}}{\partial x^{b}}\label{spatial metric}
\end{equation}
Let $g$ denote the determinant of the spatial metric $g_{ab}$. It should transform as
\begin{equation}
g' = |g_{a'b'}| = |g_{ab}\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}}| = |g_{ab}||\frac{\partial x^{a}}{\partial x^{a'}}||\frac{\partial x^{b}}{\partial x^{b'}}| = g|\frac{\partial x}{\partial x'}|^{2}
\end{equation}
Besides from the spatial metric, the lapse $\alpha$ and the shift vector $\beta^{a}$ are two significant variables in the 3 + 1 splitting scheme. 

From equations [\ref{normal covector}-\ref{spacetime metric 3 + 1}], we have that
\begin{align}
^{(4)}g_{a0} & = \beta_{a}\label{lapse}\\
^{(4)}g_{00} & = -\alpha^2 + g_{ab}\beta^{a}\beta^{b}\label{shift}
\end{align}
According to Eq.~\ref{lapse} and Eq.~\ref{spacetime metric}, we have
\begin{align}
\beta_{a'} & = (g_{ab}X^{a}_{\mu}X^{b}_{\nu} - n_{\mu}n_{\nu})\frac{\partial x^{\mu}}{\partial x^{a'}}\frac{\partial x^{\nu}}{\partial t'}\notag\\
& = g_{ab}X^{a}_{\mu}X^{b}_{\nu}\delta_{c}^{\mu}\frac{\partial x^{c}}{\partial x^{a'}}\frac{\partial x^{\nu}}{\partial t'}\notag\\
& = g_{ab}(\delta^{b}_{\nu} + \beta^{b}\delta^{0}_{\nu})\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{\nu}}{\partial t'}\notag\\
& = \beta_{a}\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial t}{\partial t'} + g_{ab}\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial t'}\label{shift covector transform}
\end{align}
Use the results from Eq.~\ref{spatial metric} and Eq.~\ref{shift covector transform}, we can easily derive the transform law of the shift vector
\begin{align}
\beta^{a'} & = \beta_{b'}g^{a'b'}\notag\\
& = \left(\beta_{b}\frac{\partial x^{b}}{\partial x^{b'}}\frac{\partial t}{\partial t'} + g_{cd}\frac{\partial x^{d}}{\partial x^{b'}}\frac{\partial x^{c}}{\partial t'}\right)g^{ab}\frac{\partial x^{a'}}{\partial x^{a}}\frac{\partial x^{b'}}{\partial x^{b}}\notag\\
& = \beta^{a}\frac{\partial x^{a'}}{\partial x^{a}}\frac{\partial t}{\partial t'} + \frac{\partial x^{a'}}{\partial x^{a}}\frac{\partial x^{a}}{\partial t'}
\end{align}
Use the result from Eq.~\ref{shift transform} along with Eq.~\ref{lapse} and Eq.~\ref{spacetime metric}, we can derive the transform law of the lapse function. 
\begin{align*}
\alpha'^{2} & = - (g_{ab}X^{a}_{\mu}X^{b}_{\nu} - n_{\mu}n_{\nu})\frac{\partial x^{\mu}}{\partial t'}\frac{\partial x^{\nu}}{\partial t'} + g_{a'b'}\beta^{a'}\beta^{b'}\notag\\ 
& = \alpha^2\left(\frac{\partial t}{\partial t'}\right)^{2}
\end{align*}
Therefore we have
\begin{equation}
\alpha' = \alpha\frac{\partial t}{\partial t'}\label{lapse transform}
\end{equation}
From the calculation above we can tell that the shift vector $\beta^{a}$ doesn't transform as a vector under this coordinate transformation. In order to resolve this, we introduce the backgrond metric denoted as ${\bar g}_{\mu\nu}$. The background metric was initially introduced to make the Christoffel symbols transform as a tensor and it is usually defined as a trivial metric, i.e., ${\bar g}_{\mu\nu} = diag(-1,1,1,1)$. Therefore, we should have ${\bar g} = -1, $${\bar \Gamma}^{a}_{~bc} = 0$, ${\bar \alpha} = 1$ and ${\bar \beta}^{a} = 0$. The background shift vector ${\bar \beta}^{a}$ follows the same transform law of $\beta^{a}$
\[
{\bar \beta}^{a'} = {\bar \beta}^{a}\frac{\partial x^{a'}}{\partial x^{a}}\frac{\partial t}{\partial t'} + \frac{\partial x^{a'}}{\partial x^{a}}\frac{\partial x^{a}}{\partial t'}
\]
and hence the difference between $\beta^{a}$ and ${\bar \beta}^{a}$ should transform as a vector
\begin{equation}
\Delta \beta^{a'} = \Delta \beta^{a}\frac{\partial x^{a'}}{\partial x^{a}}
\end{equation}
where $\Delta \beta^{a} = \beta^{a} - {\bar \beta}^{a}$. 

According to the definition of extrinsic curvature in Eq.~\ref{extrinsic}, in order to learn how it transforms, we need to write down the transform law of $\partial_{t}g_{ab}$ and $D_{a}\beta^{b}$ first. For $\partial_{t}g_{ab}$, we have
\begin{align}
\partial_{t'}g_{a'b'} & = (\partial_{t'}g_{ab})\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}} + g_{ab}\partial_{t'}\left(\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}}\right)\notag\\
& =  (\partial_{t}g_{ab})\frac{\partial t}{\partial t'}\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}} + (\partial_{c}g_{ab})\frac{\partial x^{c}}{\partial t'}\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}} + g_{ab}\partial_{t'}\left(\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}}\right)
\end{align}
For $D_{a}\beta_{b}$, we have
\begin{align}
D_{a'}\beta_{b'} & = D_{a'}\left(\beta_{b}\frac{\partial x^{b}}{\partial x^{b'}}\frac{\partial t}{\partial t'}\right) + D_{a'}\left(g_{bc}\frac{\partial x^{b}}{\partial x^{b'}}\frac{\partial x^{c}}{\partial t'}\right)\notag\\
& = D_{a}\beta_{b}\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}}\frac{\partial t}{\partial t'} + g_{b'c'}D_{a'}\left(\frac{\partial x^{c'}}{\partial x^{c}}\frac{\partial x^{c}}{\partial t'}\right)
\end{align}
As a result, the extrinsic curvature transforms as a (0,2) tensor, we omitted the tedious calculation and list the result below
\begin{equation}
K_{a'b'} = K_{ab}\frac{\partial x^{a}}{\partial x^{a'}}\frac{\partial x^{b}}{\partial x^{b'}}
\end{equation}  
\section{}\label{gauge}
\section{}\label{example}
\end{document}
